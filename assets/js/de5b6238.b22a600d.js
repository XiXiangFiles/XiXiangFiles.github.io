"use strict";(self.webpackChunkmy_blog=self.webpackChunkmy_blog||[]).push([[725],{3905:(e,t,a)=>{a.d(t,{Zo:()=>i,kt:()=>N});var r=a(7294);function n(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function m(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function s(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?m(Object(a),!0).forEach((function(t){n(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):m(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function p(e,t){if(null==e)return{};var a,r,n=function(e,t){if(null==e)return{};var a,r,n={},m=Object.keys(e);for(r=0;r<m.length;r++)a=m[r],t.indexOf(a)>=0||(n[a]=e[a]);return n}(e,t);if(Object.getOwnPropertySymbols){var m=Object.getOwnPropertySymbols(e);for(r=0;r<m.length;r++)a=m[r],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(n[a]=e[a])}return n}var o=r.createContext({}),l=function(e){var t=r.useContext(o),a=t;return e&&(a="function"==typeof e?e(t):s(s({},t),e)),a},i=function(e){var t=l(e.components);return r.createElement(o.Provider,{value:t},e.children)},k="mdxType",u={inlineCode:"code",wrapper:function(e){var t=e.children;return r.createElement(r.Fragment,{},t)}},c=r.forwardRef((function(e,t){var a=e.components,n=e.mdxType,m=e.originalType,o=e.parentName,i=p(e,["components","mdxType","originalType","parentName"]),k=l(a),c=n,N=k["".concat(o,".").concat(c)]||k[c]||u[c]||m;return a?r.createElement(N,s(s({ref:t},i),{},{components:a})):r.createElement(N,s({ref:t},i))}));function N(e,t){var a=arguments,n=t&&t.mdxType;if("string"==typeof e||n){var m=a.length,s=new Array(m);s[0]=c;var p={};for(var o in t)hasOwnProperty.call(t,o)&&(p[o]=t[o]);p.originalType=e,p[k]="string"==typeof e?e:n,s[1]=p;for(var l=2;l<m;l++)s[l]=a[l];return r.createElement.apply(null,s)}return r.createElement.apply(null,a)}c.displayName="MDXCreateElement"},4716:(e,t,a)=>{a.r(t),a.d(t,{assets:()=>o,contentTitle:()=>s,default:()=>u,frontMatter:()=>m,metadata:()=>p,toc:()=>l});var r=a(7462),n=(a(7294),a(3905));const m={title:"[\u6df1\u5165\u6dfa\u51faMQTT]:  v3.1.1\u8207v5 \u7684\u5dee\u7570",description:"MQTT v3.1.1 \u8207 v5 \u5b8c\u5168\u76f8\u5bb9\uff0c\u4e14\u63d0\u4f9b\u8a31\u591aCluster \u6240\u9700\u8981\u7684\u529f\u80fd\uff0c\u5982Shared Subscriptions\u3001 User Properties\u7b49\u5be6\u7528\u529f\u80fd\uff0c\u4e14\u4e0d\u6703\u56e0\u70ba\u65b0\u589e\u52a0\u529f\u80fd\u9020\u6210\u6548\u80fd\u4f4e\u843d\u7684\u554f\u984c\u3002",keywords:["mqtt","m2m"],sidebar_position:2},s="[\u6df1\u5165\u6dfa\u51faMQTT]:  v3.1.1\u8207v5 \u7684\u5dee\u7570",p={unversionedId:"broker/2021.07.12.mqtt5_vs_3",id:"broker/2021.07.12.mqtt5_vs_3",title:"[\u6df1\u5165\u6dfa\u51faMQTT]:  v3.1.1\u8207v5 \u7684\u5dee\u7570",description:"MQTT v3.1.1 \u8207 v5 \u5b8c\u5168\u76f8\u5bb9\uff0c\u4e14\u63d0\u4f9b\u8a31\u591aCluster \u6240\u9700\u8981\u7684\u529f\u80fd\uff0c\u5982Shared Subscriptions\u3001 User Properties\u7b49\u5be6\u7528\u529f\u80fd\uff0c\u4e14\u4e0d\u6703\u56e0\u70ba\u65b0\u589e\u52a0\u529f\u80fd\u9020\u6210\u6548\u80fd\u4f4e\u843d\u7684\u554f\u984c\u3002",source:"@site/docs/broker/2021.07.12.mqtt5_vs_3.md",sourceDirName:"broker",slug:"/broker/2021.07.12.mqtt5_vs_3",permalink:"/docs/broker/2021.07.12.mqtt5_vs_3",draft:!1,tags:[],version:"current",sidebarPosition:2,frontMatter:{title:"[\u6df1\u5165\u6dfa\u51faMQTT]:  v3.1.1\u8207v5 \u7684\u5dee\u7570",description:"MQTT v3.1.1 \u8207 v5 \u5b8c\u5168\u76f8\u5bb9\uff0c\u4e14\u63d0\u4f9b\u8a31\u591aCluster \u6240\u9700\u8981\u7684\u529f\u80fd\uff0c\u5982Shared Subscriptions\u3001 User Properties\u7b49\u5be6\u7528\u529f\u80fd\uff0c\u4e14\u4e0d\u6703\u56e0\u70ba\u65b0\u589e\u52a0\u529f\u80fd\u9020\u6210\u6548\u80fd\u4f4e\u843d\u7684\u554f\u984c\u3002",keywords:["mqtt","m2m"],sidebar_position:2},sidebar:"tutorialSidebar",previous:{title:"Broker \u5230\u5e95\u662f\u4ec0\u9ebc",permalink:"/docs/broker/2020.11.11.what_is_broker"},next:{title:"\u5340\u584a\u93c8\u7269\u806f\u7db2\u67b6\u69cb \u89e3\u6c7a\u54ea\u4e9b\u5b89\u5168\u6027\u8b70\u984c\uff1f",permalink:"/docs/blockchain/2021.03.07.blockchain_issues"}},o={},l=[{value:"<strong>1. Qos(Quality of Service):</strong> ",id:"1-qosquality-of-service-",level:3},{value:"<strong>2. Topic</strong>",id:"2-topic",level:3},{value:"<strong>3. Persistent Session:</strong> ",id:"3-persistent-session-",level:3},{value:"<strong>4. Retained Messages:</strong> ",id:"4-retained-messages-",level:3},{value:"<strong>5. Last Will and Testament(lwt)</strong>",id:"5-last-will-and-testamentlwt",level:3},{value:"<strong>MQTT v5 features and v 3.1.1 features comparison</strong>",id:"mqtt-v5-features-and-v-311-features-comparison",level:3},{value:"<strong>MQTT v5 User Properties</strong>",id:"mqtt-v5-user-properties",level:3},{value:"<strong>MQTT v5 Shared Subscriptions</strong>",id:"mqtt-v5-shared-subscriptions",level:3},{value:"MQTT v3.1.1 v.s MQTT v5\u80fd\u529b\u6bd4\u8f03",id:"mqtt-v311-vs-mqtt-v5\u80fd\u529b\u6bd4\u8f03",level:3},{value:"\u6e2c\u8a661- [1, 3, 5, 7 ,10 ] publisher + 1 subscriber ",id:"\u6e2c\u8a661--1-3-5-7-10--publisher--1-subscriber-",level:4},{value:"<strong>\u6e2c\u8a662- 1 publisher + [1, 3, 5, 7 ,10 ]  subscriber</strong>",id:"\u6e2c\u8a662--1-publisher--1-3-5-7-10---subscriber",level:4},{value:"<strong>\u6e2c\u8a663- 1 publisher + 1 subscriber\uff0c\u4ee5\u4e00\u6b211000\u300110,000\u300140,000\u300170,000\u3001100,000 \u9001\u51fa\u8a0a\u606f\uff0c\u90541,000,000 \u689d\u8a0a\u606f\u5f8c\uff0c\u7d00\u9304TPS\u3001QoS\u53d6\u5e73\u5747\u503c\u3002</strong>",id:"\u6e2c\u8a663--1-publisher--1-subscriber\u4ee5\u4e00\u6b211000100004000070000100000-\u9001\u51fa\u8a0a\u606f\u90541000000-\u689d\u8a0a\u606f\u5f8c\u7d00\u9304tpsqos\u53d6\u5e73\u5747\u503c",level:4},{value:"\u7d50\u8ad6",id:"\u7d50\u8ad6",level:3}],i={toc:l},k="wrapper";function u(e){let{components:t,...m}=e;return(0,n.kt)(k,(0,r.Z)({},i,m,{components:t,mdxType:"MDXLayout"}),(0,n.kt)("h1",{id:"\u6df1\u5165\u6dfa\u51famqtt--v311\u8207v5-\u7684\u5dee\u7570"},"[\u6df1\u5165\u6dfa\u51faMQTT]",":  v3.1.1\u8207v5 \u7684\u5dee\u7570"),(0,n.kt)("p",null,"MQTT \u8d77\u521d\u662f\u7531 IBM \u5728 1999 \u5e74\u63d0\u51fa\u7684\uff0c\u662f\u91dd\u5c0d IoT \u88dd\u7f6e\u8a2d\u8a08\u7684 MQ\uff0c\u662f\u5c6c\u65bc\u767c\u5c55\u8a31\u4e45\u7684 MQ\u3002\u4e3b\u8981\u8a2d\u8a08\u7684\u539f\u5247\u662f\uff1a"),(0,n.kt)("ol",null,(0,n.kt)("li",{parentName:"ol"},"Simple implementation: \u53ef\u4ee5\u7c21\u55ae\u7684\u88ab\u4f7f\u7528\u3002"),(0,n.kt)("li",{parentName:"ol"},"Quality of Service data delivery: \u63d0\u4f9b\u4e0d\u540c\u7a0b\u5ea6\u7684Data \u50b3\u8f38\u54c1\u8cea\u3002"),(0,n.kt)("li",{parentName:"ol"},"Lightweight and bandwidth efficient: \u8f15\u91cf\u5316\u4e14\u9ad8\u983b\u5bec\u7684\u6548\u80fd\u3002"),(0,n.kt)("li",{parentName:"ol"},"Data agnostic: \u4f7f\u7528\u8005\u4e0d\u7528\u7406\u6703\u8cc7\u6599\u600e\u9ebc\u4f86\u3002"),(0,n.kt)("li",{parentName:"ol"},"Continuous session awareness: \u7576client\u4e2d\u65b7\u9023\u7dda\u4e4b\u5f8c\uff0c\u53ef\u4ee5\u91cd\u65b0\u9023\u7dda\u4e26\u4e14\u8a0a\u606f\u4e0d\u6703\u6d88\u5931\u3002")),(0,n.kt)("p",null,"\u96d6\u7136\u8d77\u51fa\u88ab\u8a2d\u8a08\u7528\u65bc IoT (Internet of Thing) \u88dd\u7f6e\uff0c\u4f46\u76ee\u524dMQ\u88ab\u5ee3\u6cdb\u904b\u7528\u5728Platform\u56e0\u6b64\u57282019 \u5e74\u6642MQTT\u6b63\u5f0f\u63d0\u51fav5\u7248\u672c\u66f4\u88ab\u63a8\u85a6\uff0c\u4e3b\u8981\u5c31\u662f\u70ba\u4e86platform \u5e73\u53f0\u65b0\u7684\u9700\u6c42\u65b0\u589e\u52a0\u529f\u80fd\u3002(\u76ee\u524d\u5e02\u9762\u4e0a\u6709\u5169\u500b\u7248\u672c\uff0cv3.1.1\u3001v.5) MQTT Architecture"),(0,n.kt)("p",null,(0,n.kt)("img",{parentName:"p",src:"https://cdn-images-1.medium.com/max/800/1*_adP484gIyNNVAvYRZDmVQ.png",alt:"MQTT Architecture"})),(0,n.kt)("p",null,(0,n.kt)("strong",{parentName:"p"},"MQTT v3.1.1 Features")),(0,n.kt)("p",null,"\u5728\u529f\u80fd\u9762MQTT \u662f\u4ee5 v3.1.1\u4f5c\u70ba\u57fa\u790e\u7684\u529f\u80fd\uff0c\u800cv5\u5247\u662f\u70ba\u96f2\u670d\u52d9\u9032\u884c\u64f4\u5145\u4f46\u4e5f\u66f4\u6539\u4e00\u4e9b\u7279\u6027\uff0c\u5982",(0,n.kt)("strong",{parentName:"p"},"QoS..."),"\u3002MQTT\u8207\u50b3\u7d71\u610f\u7fa9\u6709\u4e9b\u8a31\u4e0d\u4e00\u6a23\u3002\u5982\u4e0b\u6bd4\u8f03\u8868:"),(0,n.kt)("table",null,(0,n.kt)("thead",{parentName:"table"},(0,n.kt)("tr",{parentName:"thead"},(0,n.kt)("th",{parentName:"tr",align:null}),(0,n.kt)("th",{parentName:"tr",align:null},(0,n.kt)("strong",{parentName:"th"},"MQTT")),(0,n.kt)("th",{parentName:"tr",align:null},(0,n.kt)("strong",{parentName:"th"},"TraditionalMQ")))),(0,n.kt)("tbody",{parentName:"table"},(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",{parentName:"tr",align:null},"Persistent Message"),(0,n.kt)("td",{parentName:"tr",align:null},"\u7576consumer \u53d6\u7684\u8a0a\u606f\u4e4b\u524d\uff0c\u53ef\u8a2d\u5b9a\u5c07\u8a0a\u606f\u4fdd\u5b58\u5728MQ\u4e2d\uff0c\u76f4\u5230\u88ab\u53d6\u7528"),(0,n.kt)("td",{parentName:"tr",align:null},"\u7576consumer \u53d6\u7684\u8a0a\u606f\u4e4b\u524d\uff0c\u53ef\u8a2d\u5b9a\u5c07\u8a0a\u606f\u4fdd\u5b58\u5728MQ\u4e2d\uff0c\u76f4\u5230\u88ab\u53d6\u7528")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",{parentName:"tr",align:null},"Distribution Ability"),(0,n.kt)("td",{parentName:"tr",align:null},"\u900f\u904eTopic\u7684\u65b9\u5f0f\u53ef\u5f88\u8f15\u9b06\u7684\u9032\u884c\u50b3\u905e\u7d66\u591a\u500bconsumer"),(0,n.kt)("td",{parentName:"tr",align:null},"\u50b3\u7d71\u7684consumer\u8207queue\u662f\u4e00\u5c0d\u4e00\u7684\u7d81\u5b9a\uff0c\u4e0d\u592a\u80fd\u5206\u4eab\u8a0a\u606f")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",{parentName:"tr",align:null},"Queue Name"),(0,n.kt)("td",{parentName:"tr",align:null},"\u4f7f\u7528\u4e0a\u5b8c\u5168\u4e0d\u7528\u7406\u6703name \u662f\u5426\u885d\u7a81\u7684\u554f\u984c\uff0c\u53ea\u8981\u5728\u4e4e\u60f3\u8a02\u95b1\u7684Topic"),(0,n.kt)("td",{parentName:"tr",align:null},"\u9808\u81ea\u884c\u7ba1\u7406queue \u7684name")))),(0,n.kt)("p",null,(0,n.kt)("strong",{parentName:"p"},"MQTT v3.1.1\u4e3b\u8981\u529f\u80fd"),"\u6709QoS\u3001Topic\u3001Persistent Session(\u91cd\u65b0\u9023\u7dda\u5f8cTopic\u9084\u5b58\u5728)\u3001Retained Messages\u3001Last Will\u3002"),(0,n.kt)("h3",{id:"1-qosquality-of-service-"},(0,n.kt)("strong",{parentName:"h3"},"1. Qos(Quality of Service):")," "),(0,n.kt)("p",null,"\u4ee3\u8868\u7684\u662f\u767c\u9001\u8207\u63a5\u6536\u8a0a\u606f\u7684\u54c1\u8cea\uff0c\u53ef\u8a2d\u5b9a0-2\u9019\u500b\u5340\u9593\u3002"),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("em",{parentName:"li"},"At most once")," (0): Producer \u5c31\u662f\u55ae\u7d14\u767c\u9001\u4e4b\u5f8c\u4e0d\u7528\u78ba\u8a8d\u662f\u5426broker\u6709\u6536\u5230\uff1bBroker \u767c\u9001\u81f3consumer\u4e5f\u4e0d\u6703\u78ba\u8a8d\u662f\u5426\u6536\u5230\u3002")),(0,n.kt)("p",null,(0,n.kt)("img",{parentName:"p",src:"https://cdn-images-1.medium.com/max/800/1*fR9iCJnuoxGEZI6Zb4SGSQ.png",alt:null})),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("em",{parentName:"li"},"At least once")," (1): Producer \u5c31\u662f\u55ae\u7d14\u767c\u9001\u4e4b\u5f8c\u6703\u7b49\u5f85 ",(0,n.kt)("strong",{parentName:"li"},"PUBACK \u5c01\u5305\u78ba\u8a8d\u6709\u6536\u5230"),"\uff1b\u540c\u7406Broker \u767c\u9001\u81f3consumer\u4e5f\u9700\u7b49\u5f85",(0,n.kt)("strong",{parentName:"li"},"PUBACK"),"\u3002")),(0,n.kt)("p",null,(0,n.kt)("img",{parentName:"p",src:"https://cdn-images-1.medium.com/max/800/1*0Cp2cDaXuXdMUv49JaxGKQ.png",alt:null})),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("em",{parentName:"li"},"Exactly once")," (2): Producer \u6bcf\u767c\u9001\u8a0a\u606f\u4e4b\u5f8c",(0,n.kt)("strong",{parentName:"li"},"\u5c31\u6703\u9032\u884c3\u5411\u4ea4\u63e1"),"\uff0c\u78ba\u8a8d\u662f\u5426\u6709\u6536\u5230\uff0c\u4f75\u4fdd\u8b49\u53ea\u6536\u5230\u4e00\u6b21\uff1b\u540c\u7406consumer \u63a5\u6536broker \u8a0a\u606f\u4e5f\u662f\u5982\u6b64\u3002")),(0,n.kt)("p",null,(0,n.kt)("img",{parentName:"p",src:"https://cdn-images-1.medium.com/max/800/1*rANapuhzHKjB794P7rNweg.png",alt:null})),(0,n.kt)("h3",{id:"2-topic"},(0,n.kt)("strong",{parentName:"h3"},"2. Topic")),(0,n.kt)("p",null,'MQTT Topic\u662f\u7531utf-8 \u7de8\u78bc\u7d44\u6210\uff0c\u5982Http\u7684URL\u7684\u6982\u5ff5\uff0c\u900f\u904e"/"\u9032\u884c\u5206\u968e\u5c64\u3002\u5982\u4e0b\u5716\uff0cmyhome\u968e\u5c64\u4e0bgroundfloor\u3001livingroom\u3001temperature\u7b49\uff0c\u5982\u540cREST \u67b6\u69cb\u4e2d\u5c0d\u65bcURI\u7684\u898f\u7bc4\u985e\u4f3c\u3002'),(0,n.kt)("p",null,(0,n.kt)("img",{parentName:"p",src:"https://cdn-images-1.medium.com/max/800/1*FOrZN9a90ffw8CxO8NW0Pg.png",alt:null})),(0,n.kt)("p",null,(0,n.kt)("strong",{parentName:"p"},"2.1 Topic \u7279\u6b8a\u7b26\u865f:")),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},"\u201d\uff03\u201d: \u4ee3\u8868\u7684\u5782\u76f4\u7684\u6982\u5ff5\uff0c\u6307\u7684\u662f\u8a72\u968e\u5c64\u4ee5\u4e0b\u7684\u5168\u90e8Topic\u90fd\u8a02\u95b1\uff0c\\\nex: myhome/groundfloor/#\uff0c\u8868\u793a\u8a02\u95b1myhome/groundfloor/kitchen\u3001myhome/groundfloor/livingroom\u3001myhome/groundfloor/livingroom/..\u7684\u610f\u601d\u3002")),(0,n.kt)("p",null,(0,n.kt)("img",{parentName:"p",src:"https://cdn-images-1.medium.com/max/800/1*xssnk2qlEhWiU2FEk_jBuw.png",alt:null})),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},"\u201d\uff0b\u201d: \u4ee3\u8868\u6c34\u5e73\u7684\u6982\u5ff5\uff0c\u4f7f\u7528\u8a72\u7b26\u865f\u7684\u968e\u5c64\u6240\u8655\u7684\u968e\u5c64\u53ef\u4ee5\u66ff\u63db\u6210\u4efb\u4f55\u5b57\u5143\u3002ex: \u4ee5myhome/groundfloor/+/temperature\u70ba\u4f8b\uff0c\u201d\uff0b\u201d\u53ef\u66ff\u63db\u6210kitchen\u3001livingroom \u7684\u6982\u5ff5\u3002\\\n\u4ee3\u8868\u540c\u6642\u8a02\u95b1: myhome/groundfloor/kitchen/temperature\u3001myhome/groundfloor/livingroom/temperature\u7b49Topic\u3002")),(0,n.kt)("p",null,(0,n.kt)("img",{parentName:"p",src:"https://cdn-images-1.medium.com/max/800/1*KYgWaWcirCoUKgNMPiYzsw.png",alt:null})),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},"\u201d\uff04\u201d: \u4ee5\u6b64\u95dc\u9375\u5b57\u70ba\u9996\u7684\u4f75\u4e0d\u652f\u63f4\u8a02\u95b1\u7684\uff0c\u8a72\u95dc\u9375\u5b57\u662fMQTT\u7528\u65bc\u8f38\u51fa\u5167\u90e8\u72c0\u614b\u7684\u4fdd\u7559\u5b57\u3002ex: $SYS/broker/clients/connected\uff0c\u53ef\u53d6\u5f97\u6709\u591a\u5c11\u88dd\u7f6e\u9023\u7dda\u3002\\")),(0,n.kt)("h3",{id:"3-persistent-session-"},(0,n.kt)("strong",{parentName:"h3"},"3. Persistent Session:")," "),(0,n.kt)("p",null,"\u7576clinet \u5c0dMQTT \u9023\u7dda\u65b7\u6389\u6642\uff0cTopic \u5c07\u6703\u81ea\u52d5\u7684discard\u3002\u4f46\u70ba\u4e86\u89e3\u6c7a\u9019\u500b\u554f\u984c\uff0cPersistent Serssion\u7684\u8a2d\u8a08\u5c31\u662f\u70ba\u4e86\u89e3\u6c7a\u9019\u500b\u554f\u984c\u800c\u751f\u3002"),(0,n.kt)("p",null,"\u6709\u6548\u6642broker \u5b58\u53d6\u7684\u6771\u897f\uff1a"),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},"Existence of a session (even if there are no subscriptions)."),(0,n.kt)("li",{parentName:"ul"},"\u6240\u6709\u7684subscription \u3002"),(0,n.kt)("li",{parentName:"ul"},"QoS \u5c1a\u672a\u5b8c\u6210\u50b3\u8f38\u7684message\u3002"),(0,n.kt)("li",{parentName:"ul"},"QoS 1\u30012 \u5c1a\u672a\u50b3\u7d66Client\u7684message\u90fd\u6703\u7559\u5b58\u3002"),(0,n.kt)("li",{parentName:"ul"},"\u6240\u6709QoS 2 \u672a\u5b8c\u6210Ack\u7684message \u3002")),(0,n.kt)("p",null,(0,n.kt)("strong",{parentName:"p"},"Persistent Session\u4f7f\u7528\u65b9\u5f0f"),"\\\n\u5c31\u662f\u5728\u9023\u7dda\u7684\u6642\u5019\u9700\u8981\u5c07option\u7684clean session \u8a2d\u5b9a\u70bafalse\u3002"),(0,n.kt)("h3",{id:"4-retained-messages-"},(0,n.kt)("strong",{parentName:"h3"},"4. Retained Messages:")," "),(0,n.kt)("p",null,"\u4e3b\u8981\u662f\u5728producer\u4e0a\u7684\u529f\u80fd\uff0c\u767c\u9001\u8a0a\u606f\u5f8c\u6703\u5c07\u8a0a\u606f\u4fdd\u6301\u5728Topic \u4e0a\uff0c\u4f7f\u7684\u65b0\u7684\u52a0\u5165\u8005\u4e5f\u53ef\u4ee5\u7372\u53d6\u6700\u65b0\u7684\u606f\u3002\u82e5\u5728\u6c92\u6709\u8a2d\u5b9a\u7684\u60c5\u6cc1\u4e0b\uff0c\u65b0\u52a0\u5165\u7684consumer\u4e0d\u6703\u6536\u5230\u4e0a\u4e00\u500b\u4ee5\u767c\u9001\u904e\u7684\u8a0a\u606f\u3002"),(0,n.kt)("h3",{id:"5-last-will-and-testamentlwt"},(0,n.kt)("strong",{parentName:"h3"},"5. Last Will and Testament(lwt)")),(0,n.kt)("p",null,"\u662f\u5728producer\u4e0a\u7684\u529f\u80fd\uff0c\u7576Producer\u65b7\u7dda\u7684\u6642\u5019\uff0c\u53ef\u6307\u5b9alwt\u7684Topic\uff0c\u8207\u60f3\u8981\u50b3\u9001\u7684\u8a0a\u606f\u3002\u9019\u529f\u80fd\u4e3b\u8981\u7528\u4f86debug\u7528\u7684\uff0c\u5b98\u65b9\u63d0\u4f9b\u9019\u7a2e\u529f\u80fd\u5f88\u9069\u5408\u653e\u5728\u4e0aonline and offline \u7684\u7ba1\u7406\u4e0a\u3002"),(0,n.kt)("h3",{id:"mqtt-v5-features-and-v-311-features-comparison"},(0,n.kt)("strong",{parentName:"h3"},"MQTT v5 features and v 3.1.1 features comparison")),(0,n.kt)("p",null,"\u5728\u9019\u500b\u7248\u672c\u4e2d\u6574\u9ad4\u4f7f\u7528\u65b9\u5f0f\uff0cMQTT v5\u8207v3.1.1\u4e4b\u9593\u529f\u80fd\u4e0a\u7684\u7684\u5dee\u5225\u5728\u65bc QoS 1 \u4ee5\u4e0a\u4e0d\u518d\u91cd\u50b3\u8a0a\u606f\u3001retained messages\u3001persistent sessions\u4e0d\u518d\u652f\u63f4\u4e86\u3002"),(0,n.kt)("ol",null,(0,n.kt)("li",{parentName:"ol"},(0,n.kt)("strong",{parentName:"li"},"MQTT QoS")," ",(0,n.kt)("em",{parentName:"li"},"v5 \u3001v3.1"),".1 \u4e4b\u9593\u7684\u5b9a\u7fa9\u662f\u4e00\u6a23\u7684\uff0c\u4f46v5 \u7684\u7248\u672c\u4e0d\u5728TCP \u9023\u7dda\u5065\u5eb7\u7684\u60c5\u6cc1\u4e0b\u91cd\u50b3\u8a0a\u606f\u3002              \\\n\u539f\u5148\u7684v3.1.1 \u7248\u672c\u82e5\u5728\u4e00\u6bb5\u6642\u9593\u5167\u6c92\u6536\u5230 ack \u5c07\u6703\u5728retry\uff0c\u9019\u53ef\u80fd\u9020\u6210\u56e0\u70ba\u6548\u80fd\u554f\u984c\u5c0e\u81f4\u672a\u56de\u50b3\u7684\u88dd\u7f6eloading \u66f4\u91cd\u3002"),(0,n.kt)("li",{parentName:"ol"},"retained messages: v5\u4e2dMessage Expiry Interval\u7528\u4f86\u53d6\u4ee3\u6b64\u529f\u80fd\uff0c\u53ef\u4ee5\u5c07\u5176\u8a2d\u5b9a\u4e00\u500b\u6642\u9593\u5f8c\u4f75\u522a\u9664\u3002"),(0,n.kt)("li",{parentName:"ol"},"persistent sessions: \u5728v3.1.1\u4e2d\u82e5\u4e2d\u9014\u6709producer\u5c07clean session\u8a2d\u5b9a\u70batrue\u6642\uff0c\u4e4b\u524d\u6240\u5b58\u7684message\u5c07\u6703\u88ab\u4e00\u8d77\u88ab\u522a\u9664\uff0cv5 \u4e2dSession Expiry Interval \u9032\u4f86\u53d6\u4ee3\u6b64\u529f\u80fd\u3002")),(0,n.kt)("h3",{id:"mqtt-v5-user-properties"},(0,n.kt)("strong",{parentName:"h3"},"MQTT v5 User Properties")),(0,n.kt)("p",null,(0,n.kt)("img",{parentName:"p",src:"https://cdn-images-1.medium.com/max/800/1*Yfw6ZIl78ytsuQlFPZiuQQ.gif",alt:null})),(0,n.kt)("p",null,"\u985e\u4f3chttp header \u7684\u6982\u5ff5\uff0c\u53ef\u4ee5\u5728\u6bcf\u4e00\u500b\u8a0a\u606f\u4e0a\u52a0\u5165\u4e00\u500bproperty header \uff0cconsumer \u7aef\u53ef\u4f9d\u8cf4\u8a72\u6b04\u4f4d\u9032\u884c\u904b\u7528\u3002Broker \u6839\u64daconsumer \u6240\u8a02\u95b1\u7684\u8a2d\u5b9a\u9032\u884c\u8a0a\u606frouting\u3002"),(0,n.kt)("h3",{id:"mqtt-v5-shared-subscriptions"},(0,n.kt)("strong",{parentName:"h3"},"MQTT v5 Shared Subscriptions")),(0,n.kt)("p",null,"\u5728v5\u7684\u7248\u672c\u4e2d\uff0c\u539f\u751f\u652f\u63f4load balance\u7684\u529f\u80fd\uff0cconsumer \u53ef\u5728\u5efa\u7acb\u9023\u7dda\u7684\u6642\u5019\u8a2d\u5b9aBroker shared\u9078\u9805\u7d81\u5b9a\u591a\u500bconsumer \u6210\u70ba\u4e00\u500b\u7fa4\u7d44\u3002"),(0,n.kt)("p",null,(0,n.kt)("img",{parentName:"p",src:"https://cdn-images-1.medium.com/max/800/1*pw7M8FeLqakSYl5TwKRv7A.gif",alt:null})),(0,n.kt)("h3",{id:"mqtt-v311-vs-mqtt-v5\u80fd\u529b\u6bd4\u8f03"},"MQTT v3.1.1 v.s MQTT v5\u80fd\u529b\u6bd4\u8f03"),(0,n.kt)("p",null,"\u5728Intel i7 9750H\u300116GB RAM\u5728Docker \u74b0\u5883\u4e0b\u6e2c\u8a66\uff0c\u5176\u4e2d\u4f7f\u7528 eclipse-mosquitto:2.0.11 Image \u4f5c\u70baMQTT broker\u3002\u7531\u65bcMQTT v5\u7684\u7248\u672c\u5728Open Source \u793e\u7fa4\u4e0a\u4e26\u672a\u5b8c\u6574\u652f\u63f4\uff0c\u4ee5",(0,n.kt)("a",{parentName:"p",href:"https://www.eclipse.org/paho/index.php?page=downloads.php"},"Eclipse MQTT "),"\u793e\u7fa4\u70ba\u4f8b\uff0c\u76ee\u524d\u5b8c\u6574\u652f\u63f4MQTT v5\u7684\u53ea\u6709Java\u3001Python\u3001C/C++\u7b49\u4e09\u7a2e\u3002"),(0,n.kt)("p",null,(0,n.kt)("img",{src:a(3895).Z,width:"1182",height:"547"})),(0,n.kt)("p",null,"\u4f46\u5be6\u969b\u4f7f\u7528Java\u3001Python \u767c\u73fe\u4e26\u672a\u5b8c\u5168\u652f\u63f4\uff0c\u53ea\u6709C\u8a9e\u8a00\u6709\u5b8c\u6574\u652f\u63f4\uff0c\u5982\u4e0b\u5716\u6240\u793a\u3002\u56e0\u6b64\u5728\u5be6\u9a57\u7684\u90e8\u4efd\u63a1\u7528Mosquitto \u6240\u63d0\u4f9b\u7684mosquitto","_","pub \u4f5c\u70baPublisher\uff1b\u4f7f\u7528npm \u5e73\u53f0\u7684mqtt v4.2.6\u7248\u672c\u4f5c\u70baSubscriber\u9032\u884c\u5be6\u505a\u3002\u7531\u65bcNodejs\u8a72\u6a21\u7d44\u5728publish \u7684\u90e8\u4efd\uff0c\u6703\u56e0Nodejs\u4e2d\u7684Event \u6392\u7a0b\u53d7\u5230\u5f71\u97ff\uff0c\u56e0\u6b64\u53ea\u4f7f\u7528Subscriber \u529f\u80fd\u3002"),(0,n.kt)("p",null,(0,n.kt)("img",{src:a(9099).Z,width:"725",height:"442"})),(0,n.kt)("p",null,"\u5be6\u9a57\u5206\u70ba\u5169\u7a2e\u6e2c\u8a66\uff0c",(0,n.kt)("strong",{parentName:"p"},"\u541e\u5410\u91cf\u6e2c\u8a66(TPS)\u3001\u7cbe\u6e96\u5ea6\u6e2c\u8a66(QoS)"),"\u3002",(0,n.kt)("em",{parentName:"p"},(0,n.kt)("strong",{parentName:"em"},"\u541e\u5410\u91cf\u6e2c\u8a66")),"\u5206\u70baPublisher\u8207Subscriber \u5169\u7a2e\u89d2\u8272\uff0c\u5728",(0,n.kt)("em",{parentName:"p"},"Publisher \u7684\u914d\u7f6e\u4ee51\u30013\u30015\u30017\u300110 \u500bPublisher")," \u9032\u884c\u6e2c\u8a66\uff1bSubscriber \u540c Publisher \uff0c",(0,n.kt)("em",{parentName:"p"},"\u5206\u62101\u30013\u30015\u30017\u300110 \u500b")," Subscriber\u7684\u5834\u666f\u914d\u7f6e\uff0c",(0,n.kt)("strong",{parentName:"p"},"\u5c07\u767c\u9001100\u842c\u500b\u5c01\u5305\u8a08\u7b97\u5e73\u5747\u6bcf\u79d2\u7684\u541e\u5410\u91cf"),"\u3002",(0,n.kt)("em",{parentName:"p"},(0,n.kt)("strong",{parentName:"em"},"\u7cbe\u6e96\u5ea6\u6e2c\u8a66\u7684\u90e8\u4efd")),"\uff0c",(0,n.kt)("em",{parentName:"p"},"\u914d\u7f6e\u5206\u62101\u30013\u30015\u30017\u300110 \u500b")," Subscriber",(0,n.kt)("em",{parentName:"p"},"\u82071\u500b Publisher\u9032\u884c\u6e2c\u8a66\uff0c\u5c07\u767c\u9001100\u842c\u500b\u8a0a\u606f\uff0c\u5e73\u5747\u8a08\u7b97\u6bcf\u500bSubscriber\u6536\u5230\u7684\u6578\u91cf"),"\u3002"),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},"\u541e\u5410\u91cf\u6e2c\u8a66(TPS): ",(0,n.kt)("span",{parentName:"li",className:"math math-inline"},(0,n.kt)("span",{parentName:"span",className:"katex"},(0,n.kt)("span",{parentName:"span",className:"katex-mathml"},(0,n.kt)("math",{parentName:"span",xmlns:"http://www.w3.org/1998/Math/MathML"},(0,n.kt)("semantics",{parentName:"math"},(0,n.kt)("mrow",{parentName:"semantics"},(0,n.kt)("mi",{parentName:"mrow"},"T"),(0,n.kt)("mi",{parentName:"mrow"},"P"),(0,n.kt)("mi",{parentName:"mrow"},"S"),(0,n.kt)("mo",{parentName:"mrow"},"="),(0,n.kt)("mi",{parentName:"mrow"},"r"),(0,n.kt)("mi",{parentName:"mrow"},"e"),(0,n.kt)("mi",{parentName:"mrow"},"q"),(0,n.kt)("mi",{parentName:"mrow"},"u"),(0,n.kt)("mi",{parentName:"mrow"},"e"),(0,n.kt)("mi",{parentName:"mrow"},"s"),(0,n.kt)("mi",{parentName:"mrow"},"t"),(0,n.kt)("mi",{parentName:"mrow"},"s"),(0,n.kt)("mi",{parentName:"mrow",mathvariant:"normal"},"/"),(0,n.kt)("mi",{parentName:"mrow"},"p"),(0,n.kt)("mi",{parentName:"mrow"},"e"),(0,n.kt)("mi",{parentName:"mrow"},"r"),(0,n.kt)("mi",{parentName:"mrow"},"s"),(0,n.kt)("mi",{parentName:"mrow"},"e"),(0,n.kt)("mi",{parentName:"mrow"},"c"),(0,n.kt)("mi",{parentName:"mrow"},"o"),(0,n.kt)("mi",{parentName:"mrow"},"n"),(0,n.kt)("mi",{parentName:"mrow"},"d")),(0,n.kt)("annotation",{parentName:"semantics",encoding:"application/x-tex"},"TPS = requests/per second")))),(0,n.kt)("span",{parentName:"span",className:"katex-html","aria-hidden":"true"},(0,n.kt)("span",{parentName:"span",className:"base"},(0,n.kt)("span",{parentName:"span",className:"strut",style:{height:"0.6833em"}}),(0,n.kt)("span",{parentName:"span",className:"mord mathnormal",style:{marginRight:"0.05764em"}},"TPS"),(0,n.kt)("span",{parentName:"span",className:"mspace",style:{marginRight:"0.2778em"}}),(0,n.kt)("span",{parentName:"span",className:"mrel"},"="),(0,n.kt)("span",{parentName:"span",className:"mspace",style:{marginRight:"0.2778em"}})),(0,n.kt)("span",{parentName:"span",className:"base"},(0,n.kt)("span",{parentName:"span",className:"strut",style:{height:"1em",verticalAlign:"-0.25em"}}),(0,n.kt)("span",{parentName:"span",className:"mord mathnormal"},"re"),(0,n.kt)("span",{parentName:"span",className:"mord mathnormal",style:{marginRight:"0.03588em"}},"q"),(0,n.kt)("span",{parentName:"span",className:"mord mathnormal"},"u"),(0,n.kt)("span",{parentName:"span",className:"mord mathnormal"},"es"),(0,n.kt)("span",{parentName:"span",className:"mord mathnormal"},"t"),(0,n.kt)("span",{parentName:"span",className:"mord mathnormal"},"s"),(0,n.kt)("span",{parentName:"span",className:"mord"},"/"),(0,n.kt)("span",{parentName:"span",className:"mord mathnormal"},"p"),(0,n.kt)("span",{parentName:"span",className:"mord mathnormal"},"erseco"),(0,n.kt)("span",{parentName:"span",className:"mord mathnormal"},"n"),(0,n.kt)("span",{parentName:"span",className:"mord mathnormal"},"d")))))," "),(0,n.kt)("li",{parentName:"ul"},"\u7cbe\u6e96\u5ea6\u6e2c\u8a66(Qos) ",(0,n.kt)("span",{parentName:"li",className:"math math-inline"},(0,n.kt)("span",{parentName:"span",className:"katex"},(0,n.kt)("span",{parentName:"span",className:"katex-mathml"},(0,n.kt)("math",{parentName:"span",xmlns:"http://www.w3.org/1998/Math/MathML"},(0,n.kt)("semantics",{parentName:"math"},(0,n.kt)("mrow",{parentName:"semantics"},(0,n.kt)("mi",{parentName:"mrow"},"P"),(0,n.kt)("mi",{parentName:"mrow"},"r"),(0,n.kt)("mi",{parentName:"mrow"},"e"),(0,n.kt)("mi",{parentName:"mrow"},"c"),(0,n.kt)("mi",{parentName:"mrow"},"i"),(0,n.kt)("mi",{parentName:"mrow"},"s"),(0,n.kt)("mi",{parentName:"mrow"},"i"),(0,n.kt)("mi",{parentName:"mrow"},"o"),(0,n.kt)("mi",{parentName:"mrow"},"n"),(0,n.kt)("mo",{parentName:"mrow"},"="),(0,n.kt)("mi",{parentName:"mrow"},"s"),(0,n.kt)("mi",{parentName:"mrow"},"u"),(0,n.kt)("mi",{parentName:"mrow"},"m"),(0,n.kt)("mo",{parentName:"mrow",stretchy:"false"},"("),(0,n.kt)("mi",{parentName:"mrow"},"c"),(0,n.kt)("mi",{parentName:"mrow"},"o"),(0,n.kt)("mi",{parentName:"mrow"},"r"),(0,n.kt)("mi",{parentName:"mrow"},"r"),(0,n.kt)("mi",{parentName:"mrow"},"e"),(0,n.kt)("mi",{parentName:"mrow"},"c"),(0,n.kt)("mi",{parentName:"mrow"},"t"),(0,n.kt)("mi",{parentName:"mrow"},"R"),(0,n.kt)("mi",{parentName:"mrow"},"e"),(0,n.kt)("mi",{parentName:"mrow"},"q"),(0,n.kt)("mi",{parentName:"mrow"},"u"),(0,n.kt)("mi",{parentName:"mrow"},"e"),(0,n.kt)("mi",{parentName:"mrow"},"s"),(0,n.kt)("mi",{parentName:"mrow"},"t"),(0,n.kt)("mo",{parentName:"mrow",stretchy:"false"},")"),(0,n.kt)("mi",{parentName:"mrow",mathvariant:"normal"},"/"),(0,n.kt)("mi",{parentName:"mrow"},"R"),(0,n.kt)("mi",{parentName:"mrow"},"e"),(0,n.kt)("mi",{parentName:"mrow"},"q"),(0,n.kt)("mi",{parentName:"mrow"},"u"),(0,n.kt)("mi",{parentName:"mrow"},"e"),(0,n.kt)("mi",{parentName:"mrow"},"s"),(0,n.kt)("mi",{parentName:"mrow"},"t"),(0,n.kt)("mi",{parentName:"mrow"},"s")),(0,n.kt)("annotation",{parentName:"semantics",encoding:"application/x-tex"},"Precision= sum(correct Request)/Requests")))),(0,n.kt)("span",{parentName:"span",className:"katex-html","aria-hidden":"true"},(0,n.kt)("span",{parentName:"span",className:"base"},(0,n.kt)("span",{parentName:"span",className:"strut",style:{height:"0.6833em"}}),(0,n.kt)("span",{parentName:"span",className:"mord mathnormal",style:{marginRight:"0.13889em"}},"P"),(0,n.kt)("span",{parentName:"span",className:"mord mathnormal"},"rec"),(0,n.kt)("span",{parentName:"span",className:"mord mathnormal"},"i"),(0,n.kt)("span",{parentName:"span",className:"mord mathnormal"},"s"),(0,n.kt)("span",{parentName:"span",className:"mord mathnormal"},"i"),(0,n.kt)("span",{parentName:"span",className:"mord mathnormal"},"o"),(0,n.kt)("span",{parentName:"span",className:"mord mathnormal"},"n"),(0,n.kt)("span",{parentName:"span",className:"mspace",style:{marginRight:"0.2778em"}}),(0,n.kt)("span",{parentName:"span",className:"mrel"},"="),(0,n.kt)("span",{parentName:"span",className:"mspace",style:{marginRight:"0.2778em"}})),(0,n.kt)("span",{parentName:"span",className:"base"},(0,n.kt)("span",{parentName:"span",className:"strut",style:{height:"1em",verticalAlign:"-0.25em"}}),(0,n.kt)("span",{parentName:"span",className:"mord mathnormal"},"s"),(0,n.kt)("span",{parentName:"span",className:"mord mathnormal"},"u"),(0,n.kt)("span",{parentName:"span",className:"mord mathnormal"},"m"),(0,n.kt)("span",{parentName:"span",className:"mopen"},"("),(0,n.kt)("span",{parentName:"span",className:"mord mathnormal"},"correc"),(0,n.kt)("span",{parentName:"span",className:"mord mathnormal",style:{marginRight:"0.00773em"}},"tR"),(0,n.kt)("span",{parentName:"span",className:"mord mathnormal"},"e"),(0,n.kt)("span",{parentName:"span",className:"mord mathnormal",style:{marginRight:"0.03588em"}},"q"),(0,n.kt)("span",{parentName:"span",className:"mord mathnormal"},"u"),(0,n.kt)("span",{parentName:"span",className:"mord mathnormal"},"es"),(0,n.kt)("span",{parentName:"span",className:"mord mathnormal"},"t"),(0,n.kt)("span",{parentName:"span",className:"mclose"},")"),(0,n.kt)("span",{parentName:"span",className:"mord"},"/"),(0,n.kt)("span",{parentName:"span",className:"mord mathnormal",style:{marginRight:"0.00773em"}},"R"),(0,n.kt)("span",{parentName:"span",className:"mord mathnormal"},"e"),(0,n.kt)("span",{parentName:"span",className:"mord mathnormal",style:{marginRight:"0.03588em"}},"q"),(0,n.kt)("span",{parentName:"span",className:"mord mathnormal"},"u"),(0,n.kt)("span",{parentName:"span",className:"mord mathnormal"},"es"),(0,n.kt)("span",{parentName:"span",className:"mord mathnormal"},"t"),(0,n.kt)("span",{parentName:"span",className:"mord mathnormal"},"s")))))," ")),(0,n.kt)("h4",{id:"\u6e2c\u8a661--1-3-5-7-10--publisher--1-subscriber-"},"\u6e2c\u8a661- ","[","1, 3, 5, 7 ,10 ] publisher + 1 subscriber"," "),(0,n.kt)("p",null,"\u7576Publisher \u589e\u52a0\u6642\uff0cPublisher TPS \u660e\u986f\u7684\u4e0b\u964d\uff0c\u4f46Subscriber TPS \u5247\u7dda\u6027\u6210\u6574\u4e14QoS\u4e0d\u8b8a\uff0c\u4ee3\u8868\u8457mosquitto\u4e0d\u6703\u56e0\u70ba\u5c01\u5305\u6578\u91cf\u8b8a\u5927\uff0c\u9020\u6210\u4e0d\u4e00\u6a23\u7684Qos\u3002\u63db\u53e5\u8a71\u8aaaClient (Publisher) \u4e4b\u9593\u4e26\u4e0d\u6703\u4e92\u76f8\u5f71\u97ffSubscriber\u6240\u6536\u96c6\u5230\u7684\u8cc7\u8a0a\u3002"),(0,n.kt)("p",null,(0,n.kt)("img",{src:a(4035).Z,width:"1249",height:"308"})),(0,n.kt)("h4",{id:"\u6e2c\u8a662--1-publisher--1-3-5-7-10---subscriber"},(0,n.kt)("strong",{parentName:"h4"},"\u6e2c\u8a662- 1 publisher + ","[","1, 3, 5, 7 ,10 ]  subscriber")),(0,n.kt)("p",null,"\u7576Subscriber \u589e\u52a0\u6642\uff0cPublisher TPS \u4e26\u6c92\u6709\u4ec0\u9ebc\u6539\u8b8a\uff0c\u4e14Subscriber TPS\u3001QoS\u4e5f\u4e0d\u8b8a\uff0c\u4ee3\u8868\u8457mosquitto\u4e0d\u6703\u56e0\u70ba\u5c01\u5305\u6578\u91cf\u8b8a\u5927\uff0c\u9020\u6210\u4e0d\u4e00\u6a23\u7684Qos\u3002\u63db\u53e5\u8a71\u8aaaClient (Subscriber)\u4e4b\u9593\u4e26\u4e0d\u6703\u4e92\u76f8\u5f71\u97ff\u3002"),(0,n.kt)("p",null,(0,n.kt)("img",{src:a(8191).Z,width:"1238",height:"308"})),(0,n.kt)("h4",{id:"\u6e2c\u8a663--1-publisher--1-subscriber\u4ee5\u4e00\u6b211000100004000070000100000-\u9001\u51fa\u8a0a\u606f\u90541000000-\u689d\u8a0a\u606f\u5f8c\u7d00\u9304tpsqos\u53d6\u5e73\u5747\u503c"},(0,n.kt)("strong",{parentName:"h4"},"\u6e2c\u8a663- 1 publisher + 1 subscriber\uff0c\u4ee5\u4e00\u6b211000\u300110,000\u300140,000\u300170,000\u3001100,000 \u9001\u51fa\u8a0a\u606f\uff0c\u90541,000,000 \u689d\u8a0a\u606f\u5f8c\uff0c\u7d00\u9304TPS\u3001QoS\u53d6\u5e73\u5747\u503c\u3002")),(0,n.kt)("p",null,"\u5728Publisher\u7576\u4e00\u6b21\u50b3\u8f38\u7684\u5c01\u5305\u8b8a\u5c11\u6642\uff0cTPS\u3001QoS \u6703\u4ee5\u6307\u6578\u7684\u65b9\u5f0f\u6210\u9577\u3002\u4e00\u6b21\u7684\u6578\u91cf\u8d85\u904e\u6975\u9650\u7684\u541e\u5410\u91cf\uff0c\u5247\u6703\u9020\u6210Subscriber QoS\u4e0b\u964d\uff0c\u56e0\u70bamosquitto \u9810\u8a2d\u6a5f\u5236\u70ba\u7576QoS > 0\u6642\uff0cbroker\u5167\u90e8\u7d66\u55ae\u4e00\u500bClient\u7684\u5167\u5b58queue\u5c01\u5305\u6578\u91cf\u70ba1000\u689d\u8a0a\u606f\u3002\u56e0\u6b64\u53ea\u8981\u8d85\u904e\u4e00\u5b9a\u7684\u541e\u5410\u91cf\u6703\u9020\u6210QoS\u964d\u4f4e\u3002\u540c\u6642\u8a0a\u606f\u6578\u91cf\u5927\uff0c\u6703\u9020\u6210\u58c5\u585e\u7684\u60c5\u5f62\uff0c\u4f7fPublisher\u3001Subscriber \u7684 TPS \u53d7\u5230\u5f71\u97ff\u3002"),(0,n.kt)("p",null,(0,n.kt)("img",{src:a(3777).Z,width:"1235",height:"326"})),(0,n.kt)("p",null,"Subscriber \u8207 Publisher \u90fd\u4ee5QoS \u70ba2\u7684\u72c0\u614b\u4e0b\u76e1\u60c5\u6e2c\u8a66\uff0cmosquitto \u4ee5\u9810\u8a2d\u503c\u9032\u884c\u91cf\u6e2c\u3002\u767c\u73feMQTT v3.11\u3001v5 \u4e26\u672a\u6709\u660e\u986f\u5dee\u7570\uff0c\u4e14v5\u7684\u6548\u80fd\u4e9b\u5fae\u6bd4v3\u4f86\u7684\u5f31\u4e00\u9ede\u3002",(0,n.kt)("em",{parentName:"p"},(0,n.kt)("strong",{parentName:"em"},"\u4e14\u900f\u904e\u4e0a\u8ff0\u5be6\u9a57\u53ef\u5f97\u5230\u4ee5\u4e0b\u5e7e\u9ede\u7d50\u8ad6:"))),(0,n.kt)("ol",null,(0,n.kt)("li",{parentName:"ol"},"\u4f7f\u7528MQTT\u6642\uff0c\u672a\u5fc5\u5c07QoS\u8abf\u6574\u5230\u8d8a\u9ad8\u8d8a\u597d\uff0c\u7531\u65bc\u7576QoS > 0\u6642 Broker\u5c07\u6703\u9650\u5236client\u7de9\u5b58Queue\uff0c\u5c31\u6709\u53ef\u80fd\u767c\u751fPublisher \u9001\u51fa\u7684\u8cc7\u6599\u88abBroker\u6368\u68c4\u7684\u554f\u984c\uff0c\u4ee5\u81f4\u5be6\u969bQoS\u964d\u4f4e\u3002"),(0,n.kt)("li",{parentName:"ol"},"MQTT Broker\u4e26\u4e0d\u9019\u9ebc\u9069\u5408\u7528\u4f86\u7576Micro Service\u4e2d\u7684Broker\uff0c\u7531\u65bc\u7121\u6cd5\u6b63\u78ba\u9810\u671f\u8cc7\u6599\u7684\u50b3\u8f38\uff0c\u6709\u53ef\u80fd\u56e0\u6b64\u5c0e\u81f4\u91cd\u8981\u7684\u932f\u8aa4\u3002"),(0,n.kt)("li",{parentName:"ol"},"\u5728\u5927\u90e8\u5206\u60c5\u6cc1\u5efa\u8b70MQTT\u7684QoS\u8a2d\u7f6e\u70ba0\u6703\u66f4\u597d\uff0c\u7531\u65bcMQTT\u672c\u57fa\u65bcTCP\uff0c\u56e0\u6b64\u4fdd\u8b49\u5176\u4e00\u5b9a\u6703\u9001\u81f3\u6216\u50b3\u8f38\u5230\u76ee\u7684\u5730\u3002\u7136\u800c\u82e5 QoS > 0\u5247\u6703\u56e0\u70ba\u4e00\u4e9b\u78ba\u8a8d\u6a5f\u5236\u5c0e\u81f4\u8b8a\u6162\uff0c\u4f7f\u5f97TPS\u3001QoS \u4e0d\u5982\u9810\u671f\u3002")),(0,n.kt)("h3",{id:"\u7d50\u8ad6"},"\u7d50\u8ad6"),(0,n.kt)("p",null,"MQTT v3.1.1\u3001 v5\u6548\u80fd\u4e26\u672a\u6709\u5927\u7684\u5dee\u7570\uff0c\u4e14v5\u7684\u7248\u672c\u63d0\u4f9b\u66f4\u591a\u7684\u529f\u80fd\u3002\u96d6\u7136\u5b98\u65b9\u6587\u4ef6\u4e0a\u6240\u8ff0QoS\u7684\u5be6\u4f5c\u65b9\u9762\u6709\u53d7\u5230\u8abf\u6574\uff0c\u4f46\u7d93\u904e\u6e2c\u8a66\u5f8c\u4e26\u672a\u6709\u5927\u7684\u5dee\u7570\uff0c\u4f46\u5e02\u5834\u4e0a\u7684\u6240\u63d0\u4f9b\u7684\u5de5\u5177\u76ee\u524d\u5f88\u5c11\uff0c\u76f8\u4fe1\u672a\u4f86MQTT v5\u7684\u7248\u672c\u662f\u6bd4v3.1.1\u4f86\u7684\u66f4\u597d\u66f4\u5be6\u7528\u7684\u3002"))}u.isMDXComponent=!0},9099:(e,t,a)=>{a.d(t,{Z:()=>r});const r=a.p+"assets/images/image (1) (1) (2)-5d75094b501414f6170a6f843596b39b.png"},3777:(e,t,a)=>{a.d(t,{Z:()=>r});const r=a.p+"assets/images/image (10) (1) (1)-403b5e221f9e45d61d045d23aea05ed3.png"},8191:(e,t,a)=>{a.d(t,{Z:()=>r});const r=a.p+"assets/images/image (11) (1)-fd4a0131155e651c8f1b3ca8bd9f24fd.png"},3895:(e,t,a)=>{a.d(t,{Z:()=>r});const r=a.p+"assets/images/image (6) (1)-0739f2f670405f2e6eda4f777daa020a.png"},4035:(e,t,a)=>{a.d(t,{Z:()=>r});const r=a.p+"assets/images/image (9) (1)-83a9cf941a1cf502b5368638a623d282.png"}}]);